<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MyHealth Portal ‚Äì Caregiver</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="portal.js"></script>
</head>
<body data-page="caregiver">
  <a class="skip-link" href="#main">Skip to main content</a>

  <header class="appbar">
    <a class="brand" href="index.html" aria-label="Go to Home">
      <span class="brand__mark" aria-hidden="true">
        <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M256 32C256 32 160 64 96 64C96 64 96 192 96 256C96 368 256 480 256 480C256 480 416 368 416 256C416 192 416 64 416 64C352 64 256 32 256 32Z" fill="#2563EB"/>
          <circle cx="256" cy="256" r="96" fill="white"/>
          <path d="M256 200V312M200 256H312" stroke="#2563EB" stroke-width="32" stroke-linecap="round"/>
        </svg>
      </span>
      <span class="brand__text">MyHealth Portal</span>
    </a>
    <nav class="usernav">
      <button class="btn btn--top text-size" data-size="up">A+</button>
      <button class="btn btn--top text-size" data-size="down">A‚àí</button>
      <button class="btn btn--top" id="dark-toggle" aria-pressed="false">Dark</button>
      <button class="btn btn--top" id="contrast-toggle" aria-pressed="false">Contrast</button>
      <a class="btn btn--top" href="admin-login.html" title="Admin">üõ°Ô∏è</a>
      <button class="btn btn--top" data-logout>Log out</button>
    </nav>
  </header>

  <section class="patientbar">
    <div class="patientbar__left">
      <div id="patient-initials" class="patientpic">PT</div>
      <div>
        <label for="patient-select" style="font-size:.85rem;color:var(--muted);">Managing Patient:</label>
        <select id="patient-select" style="font-size:1.1rem;font-weight:600;border:none;background:transparent;cursor:pointer;">
          <option>Loading...</option>
        </select>
        <p class="patientmeta" id="patient-meta"></p>
        <p class="alerts" id="patient-alerts"></p>
      </div>
    </div>
    <div class="assist" id="login-status">Signed in as Caregiver</div>
  </section>

  <main id="main" class="layout">
    <aside class="sidenav">
      <a class="sidenav__link sidenav__link--active" href="#info" aria-current="page">Patient Info</a>
      <a class="sidenav__link" href="#meds">Medications</a>
      <button class="sidenav__link" id="issue-toggle" style="border:none;background:none;text-align:left;width:100%;cursor:pointer;">Report Issue</button>
    </aside>

    <section class="content">
      <article id="info" class="card">
        <header class="card__header">
          <h2 class="card__title">Patient Information</h2>
        </header>
        <form class="assist" style="display:grid; gap:.75rem;">
          <label>Full Name
            <input id="f-name" type="text" placeholder="Patient full name" />
          </label>

          <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:.75rem;">
            <label>MRN
              <input id="f-mrn" type="text" placeholder="Medical Record Number" />
            </label>
            <label>Date of Birth
              <input id="f-dob" type="date" />
            </label>
            <label>Blood Type
              <input id="f-blood" type="text" placeholder="e.g. O+" />
            </label>
          </div>

          <label>Allergies
            <input id="f-allergies" type="text" placeholder="Known allergies" />
          </label>

          <label>Access Code
            <input id="f-access" type="text" inputmode="numeric" placeholder="4-digit patient access code" />
          </label>

          <button type="button" class="btn btn--primary" id="save-patient" style="padding:.5rem 1rem;font-size:.9rem;">Save Patient Info</button>
        </form>
      </article>

      <article id="meds" class="card">
        <header class="card__header">
          <h2 class="card__title">Medications</h2>
        </header>

        <div class="assist" style="display:grid; gap:.75rem; padding:1rem; background:var(--surface-accent); border-radius:.5rem; margin-bottom:1rem;">
          <h3 style="margin:0; font-size:1rem;">Add New Medication</h3>
          
          <div style="display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:.5rem;">
            <label style="font-size:.85rem;">Medication Name
              <input id="med-name" type="text" placeholder="e.g. Lisinopril" />
            </label>
            <label style="font-size:.85rem;">Strength
              <input id="med-strength" type="text" placeholder="10" />
            </label>
            <label style="font-size:.85rem;">Unit
              <input id="med-unit" type="text" placeholder="mg" />
            </label>
            <label style="font-size:.85rem;">Form
              <select id="med-form">
                <option value="tablet">Tablet</option>
                <option value="capsule">Capsule</option>
                <option value="liquid">Liquid</option>
                <option value="inhaler">Inhaler</option>
              </select>
            </label>
          </div>

          <label style="font-size:.85rem;">Directions
            <input id="med-directions" type="text" placeholder="e.g. Take 1 tablet daily" />
          </label>

          <div style="display:grid; grid-template-columns:1fr 1fr; gap:.5rem;">
            <label style="font-size:.85rem;">Quantity
              <input id="med-qty" type="text" placeholder="30" />
            </label>
            <label style="font-size:.85rem;">Refills
              <input id="med-refills" type="text" placeholder="2" />
            </label>
          </div>

          <label style="font-size:.85rem;">Notes
            <input id="med-notes" type="text" placeholder="Additional notes" />
          </label>

          <button type="button" class="btn btn--primary" id="med-add" style="padding:.5rem 1rem;font-size:.9rem;">Add Medication</button>
        </div>

        <h3 style="margin:1rem 0 .5rem; font-size:1rem;">Current Medications</h3>
        <ul class="list" id="med-list-care" style="display:grid;gap:.5rem;"></ul>
        
        <div style="display:none;">
          <textarea id="f-meds" rows="8"></textarea>
        </div>
      </article>
    </section>
  </main>

  <!-- Floating Chat (bottom-right) -->
  <button id="chat-toggle" class="chat-fab" aria-label="Open secure messages">üí¨</button>
  <aside id="chat-panel" class="chat-panel" aria-label="Secure Messages" aria-live="polite">
    <div class="chat-head">
      <div>
        <h3 class="chat-title">Secure Messages</h3>
        <label for="chat-patient-select" style="font-size:.85rem;color:var(--muted);display:block;margin-top:.25rem;">
          Chatting with:
          <select id="chat-patient-select" style="font-size:.95rem;font-weight:500;border:1px solid var(--border);background:var(--surface);padding:.25rem .5rem;border-radius:.25rem;cursor:pointer;margin-left:.25rem;">
            <option>Loading patients...</option>
          </select>
        </label>
      </div>
      <button class="chat-close" type="button" onclick="document.getElementById('chat-panel').classList.remove('open')">√ó</button>
    </div>
    <div class="chat-body">
      <div id="chat-list" class="list"></div>
    </div>
    <div class="chat-foot">
      <form id="chat-form">
        <label class="muted" for="chat-input">Message</label>
        <textarea id="chat-input" rows="2" placeholder="Type a secure message‚Ä¶"></textarea>
        <button class="btn btn--primary" type="submit">Send</button>
      </form>
    </div>
  </aside>

  <!-- Issue Panel (bottom-left) -->
  <button id="issue-toggle-fab" class="chat-fab" aria-label="Report to Admin" style="left:18px;right:auto;">üìã</button>
  <aside id="issue-panel" class="chat-panel" aria-label="Report Issue" style="left:18px;right:auto;">
    <div class="chat-head">
      <div>
        <h3 class="chat-title">Report to Admin</h3>
        <span class="muted" style="display:block;font-size:.85rem;margin-top:.25rem;">Submit tickets to administrators</span>
      </div>
      <button class="chat-close" type="button" onclick="document.getElementById('issue-panel').classList.remove('open')">√ó</button>
    </div>
    <div class="chat-body">
      <div id="issue-list" class="list"></div>
    </div>
    <div class="chat-foot">
      <form id="issue-form">
        <label class="muted" for="issue-input">Describe the issue</label>
        <textarea id="issue-input" rows="3" placeholder="Report a technical or medical issue to administrators‚Ä¶"></textarea>
        <button class="btn btn--primary" type="submit">Submit Ticket</button>
      </form>
    </div>
  </aside>

  <style>
    #med-list-care {
      display: grid;
      gap: 0.5rem;
    }
  </style>
</body>
</html>